{"version":3,"file":"request-mock.es.js","sources":["../src/request-mock.ts"],"sourcesContent":["const requestMap: any = {};\n\nexport default class RequestMock {\n  private reqData: any = null;\n  private resData: any = null;\n  private errData: any = null;\n\n  constructor(reqData?: any) {\n    if (reqData) {\n      this.get(reqData);\n    }\n  }\n\n  get(reqData: any) {\n    this.reqData = reqData;\n    requestMap[JSON.stringify(this.reqData)] = this;\n    return this;\n  }\n\n  getErrData() {\n    return this.errData;\n  }\n\n  getReqData() {\n    return this.reqData;\n  }\n\n  getResData() {\n    return this.resData;\n  }\n\n  success(resData: any) {\n    this.resData = resData;\n    return this;\n  }\n\n  fail(errData: any) {\n    this.errData = errData;\n    return this;\n  }\n}\n\nglobal.wx.request = jest.fn().mockImplementation((reqData) => {\n  const mockObj = requestMap[JSON.stringify(reqData)];\n\n  if (mockObj.getErrData()) {\n    reqData.fail(mockObj.getErrData());\n  }\n  return reqData.success(mockObj.getResData());\n});\n"],"names":[],"mappings":"AAAA,IAAM,UAAU,GAAQ,EAAE,CAAC;;IAOzB,qBAAY,OAAa;QAJjB,YAAO,GAAQ,IAAI,CAAC;QACpB,YAAO,GAAQ,IAAI,CAAC;QACpB,YAAO,GAAQ,IAAI,CAAC;QAG1B,IAAI,OAAO,EAAE;YACX,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;SACnB;KACF;IAED,yBAAG,GAAH,UAAI,OAAY;QACd,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC;QAChD,OAAO,IAAI,CAAC;KACb;IAED,gCAAU,GAAV;QACE,OAAO,IAAI,CAAC,OAAO,CAAC;KACrB;IAED,gCAAU,GAAV;QACE,OAAO,IAAI,CAAC,OAAO,CAAC;KACrB;IAED,gCAAU,GAAV;QACE,OAAO,IAAI,CAAC,OAAO,CAAC;KACrB;IAED,6BAAO,GAAP,UAAQ,OAAY;QAClB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,OAAO,IAAI,CAAC;KACb;IAED,0BAAI,GAAJ,UAAK,OAAY;QACf,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,OAAO,IAAI,CAAC;KACb;IACH,kBAAC;AAAD,CAAC,IAAA;AAED,MAAM,CAAC,EAAE,CAAC,OAAO,GAAG,IAAI,CAAC,EAAE,EAAE,CAAC,kBAAkB,CAAC,UAAC,OAAO;IACvD,IAAM,OAAO,GAAG,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;IAEpD,IAAI,OAAO,CAAC,UAAU,EAAE,EAAE;QACxB,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,CAAC,CAAC;KACpC;IACD,OAAO,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,EAAE,CAAC,CAAC;AAC/C,CAAC,CAAC;;;;"}